{"version":3,"sources":["meteor://ğŸ’»app/server/local-data.js","meteor://ğŸ’»app/server/main.js"],"names":["module","export","localData","Meteor","link","v","HTTP","Mongo","data","dataRecherche","likeCollection","Chatrooms","Collection","Messages","startup","WebApp","connectHandlers","use","req","res","next","call","error","response","content","results","forEach","movieRessource","like","find","likeRessource","id","writeHead","end","Tag","url","split","console","log","insert"],"mappings":"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","file":"/app.js","sourcesContent":["export const localData = {\r\n    \"page\": 1,\r\n    \"results\": [\r\n        {\r\n            \"backdrop_path\": \"/3ombg55JQiIpoPnXYb2oYdr6DtP.jpg\",\r\n            \"genre_ids\": [\r\n                878,\r\n                28\r\n            ],\r\n            \"id\": 560144,\r\n            \"original_language\": \"en\",\r\n            \"original_title\": \"Skylines\",\r\n            \"overview\": \"Lorsqu'un virus menace de retourner les hybrides extraterrestres maintenant amicaux\",\r\n            \"popularity\": 3957.023,\r\n            \"poster_path\": \"/2W4ZvACURDyhiNnSIaFPHfNbny3.jpg\",\r\n            \"release_date\": \"2020-10-25\",\r\n            \"title\": \"Skylines\",\r\n            \"video\": false,\r\n            \"vote_average\": 5.9,\r\n            \"vote_count\": 120\r\n        },\r\n    ],\r\n    \"total_pages\": 500,\r\n    \"total_results\": 10000\r\n};\r\n","import { Meteor } from 'meteor/meteor';\nimport { localData } from './local-data.js';\nimport { HTTP } from \"meteor/http\";\nimport { Mongo } from 'meteor/mongo';\n/*\n\n    Faire des recherches par genre/rÃ©alisateur/â€¦\n\n    Gestion des favoris/blacklist par profil utilisateur\n\n    PossibilitÃ© de noter un film\n\n    PossibilitÃ© de recommander un film Ã  un autre utilisateur\n\n    Proposer des suggestions automatiques par genre\n\n */\n\n// API exemple : https://api.themoviedb.org/3/search/company?api_key=1793c4843a64fbd6fdba88ce08e45c5f&query=interstellar&page=1\nlet data;\nlet dataRecherche;\nconst likeCollection = [];\n\nconst Chatrooms = new Mongo.Collection('chatrooms');\nconst Messages = new Mongo.Collection('messages');\n\nMeteor.startup(() => {\n  // code to run on server at startup\n});\n\n\nWebApp.connectHandlers.use('/api/discover/search/', (req, res, next) => {\n    HTTP.call('GET', 'https://api.themoviedb.org/3/discover/movie?api_key=1793c4843a64fbd6fdba88ce08e45c5f&language=fr-FR', {},\n        function(error, response) {\n            data = response.content;\n\n            data.results.forEach(function (movieRessource) {\n               movieRessource.like = likeCollection.find(function (likeRessource) {\n                  return movieRessource.id === likeRessource.id; }) ?\n                   likeCollection.find(function (likeRessource) {\n                  return movieRessource.id === likeRessource.id; }).like : 0;\n               });\n            });\n    res.writeHead(200);\n    res.end(data);\n});\n\n//button\nWebApp.connectHandlers.use('/api/search/', (req, res, next) => {\n    let Tag = req.url.split(\"/\");\n\n    HTTP.call('GET', 'https://api.themoviedb.org/3/search/company?api_key=1793c4843a64fbd6fdba88ce08e45c5f&query=' + Tag[1] + '', {},\n        function(error, response) {\n            // Handle the error or response here.\n            //ctrl.movies.set(JSON.parse(response.content).results)\n\n            dataRecherche = response.content;\n        });\n    console.log(dataRecherche);\n    res.writeHead(200);\n    res.end(dataRecherche);\n});\n\n//button\nWebApp.connectHandlers.use('/api/like/', (req, res, next) => {\n    let like = req.url.split(\"/\");\n\n    Messages.insert({like: like[1]});\n\n});\n"]}