{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"C:\\Users\\Dylan\\WebstormProjects\\Themoviedb\\Themoviedb\\server\\main.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","objectRestSpread","objectRestSpread","asyncGenerators","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.windows.x86_64"},"sourceFileName":"server/main.js","filename":"C:\\Users\\Dylan\\WebstormProjects\\Themoviedb\\Themoviedb\\server\\main.js","cloneInputAst":true,"passPerPreset":false,"envName":"development","cwd":"C:\\Users\\Dylan\\WebstormProjects\\Themoviedb\\Themoviedb","root":"C:\\Users\\Dylan\\WebstormProjects\\Themoviedb\\Themoviedb","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.12.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-meteor-async-await","visitor":{"AwaitExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{"useNativeAsyncAwait":false}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":{},"_verified":{},"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"C:\\Users\\Dylan\\WebstormProjects\\Themoviedb\\Themoviedb\\server\\main.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"server/main.js"}},"code":"let Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet localData;\nmodule.link(\"./local-data.js\", {\n  localData(v) {\n    localData = v;\n  }\n\n}, 1);\nlet HTTP;\nmodule.link(\"meteor/http\", {\n  HTTP(v) {\n    HTTP = v;\n  }\n\n}, 2);\nlet Mongo;\nmodule.link(\"meteor/mongo\", {\n  Mongo(v) {\n    Mongo = v;\n  }\n\n}, 3);\n\n/*\n\n    Faire des recherches par genre/réalisateur/…\n\n    Gestion des favoris/blacklist par profil utilisateur\n\n    Possibilité de noter un film\n\n    Possibilité de recommander un film à un autre utilisateur\n\n    Proposer des suggestions automatiques par genre\n\n */\n// API exemple : https://api.themoviedb.org/3/search/company?api_key=1793c4843a64fbd6fdba88ce08e45c5f&query=interstellar&page=1\nlet data;\nlet dataRecherche;\nconst likeCollection = [];\nconst Chatrooms = new Mongo.Collection('chatrooms');\nconst Messages = new Mongo.Collection('messages');\nMeteor.startup(() => {// code to run on server at startup\n});\nWebApp.connectHandlers.use('/api/discover/search/', (req, res, next) => {\n  HTTP.call('GET', 'https://api.themoviedb.org/3/discover/movie?api_key=1793c4843a64fbd6fdba88ce08e45c5f&language=fr-FR', {}, function (error, response) {\n    data = response.content;\n    data.results.forEach(function (movieRessource) {\n      movieRessource.like = likeCollection.find(function (likeRessource) {\n        return movieRessource.id === likeRessource.id;\n      }) ? likeCollection.find(function (likeRessource) {\n        return movieRessource.id === likeRessource.id;\n      }).like : 0;\n    });\n  });\n  res.writeHead(200);\n  res.end(data);\n}); //button\n\nWebApp.connectHandlers.use('/api/search/', (req, res, next) => {\n  let Tag = req.url.split(\"/\");\n  HTTP.call('GET', 'https://api.themoviedb.org/3/search/company?api_key=1793c4843a64fbd6fdba88ce08e45c5f&query=' + Tag[1] + '', {}, function (error, response) {\n    // Handle the error or response here.\n    //ctrl.movies.set(JSON.parse(response.content).results)\n    dataRecherche = response.content;\n  });\n  console.log(dataRecherche);\n  res.writeHead(200);\n  res.end(dataRecherche);\n}); //button\n\nWebApp.connectHandlers.use('/api/like/', (req, res, next) => {\n  let like = req.url.split(\"/\");\n  Messages.insert({\n    like: like[1]\n  });\n  HTTP.call('GET', 'https://api.themoviedb.org/3/search/company?api_key=1793c4843a64fbd6fdba88ce08e45c5f&query=' + like[1] + '&page=1', {}, function (error, response) {\n    // Handle the error or response here.\n    //ctrl.movies.set(JSON.parse(response.content).results)\n    dataRecherche = response.content;\n  });\n  console.log(dataRecherche);\n  res.writeHead(200);\n  res.end(dataRecherche);\n});","map":{"version":3,"sources":["server/main.js"],"names":["Meteor","module","link","v","localData","HTTP","Mongo","data","dataRecherche","likeCollection","Chatrooms","Collection","Messages","startup","WebApp","connectHandlers","use","req","res","next","call","error","response","content","results","forEach","movieRessource","like","find","likeRessource","id","writeHead","end","Tag","url","split","console","log","insert"],"mappings":"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","sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport { localData } from './local-data.js';\nimport { HTTP } from \"meteor/http\";\nimport { Mongo } from 'meteor/mongo';\n/*\n\n    Faire des recherches par genre/réalisateur/…\n\n    Gestion des favoris/blacklist par profil utilisateur\n\n    Possibilité de noter un film\n\n    Possibilité de recommander un film à un autre utilisateur\n\n    Proposer des suggestions automatiques par genre\n\n */\n\n// API exemple : https://api.themoviedb.org/3/search/company?api_key=1793c4843a64fbd6fdba88ce08e45c5f&query=interstellar&page=1\nlet data;\nlet dataRecherche;\nconst likeCollection = [];\n\nconst Chatrooms = new Mongo.Collection('chatrooms');\nconst Messages = new Mongo.Collection('messages');\n\nMeteor.startup(() => {\n  // code to run on server at startup\n});\n\n\nWebApp.connectHandlers.use('/api/discover/search/', (req, res, next) => {\n    HTTP.call('GET', 'https://api.themoviedb.org/3/discover/movie?api_key=1793c4843a64fbd6fdba88ce08e45c5f&language=fr-FR', {},\n        function(error, response) {\n            data = response.content;\n\n            data.results.forEach(function (movieRessource) {\n               movieRessource.like = likeCollection.find(function (likeRessource) {\n                  return movieRessource.id === likeRessource.id; }) ?\n                   likeCollection.find(function (likeRessource) {\n                  return movieRessource.id === likeRessource.id; }).like : 0;\n               });\n            });\n    res.writeHead(200);\n    res.end(data);\n});\n\n//button\nWebApp.connectHandlers.use('/api/search/', (req, res, next) => {\n    let Tag = req.url.split(\"/\");\n\n    HTTP.call('GET', 'https://api.themoviedb.org/3/search/company?api_key=1793c4843a64fbd6fdba88ce08e45c5f&query=' + Tag[1] + '', {},\n        function(error, response) {\n            // Handle the error or response here.\n            //ctrl.movies.set(JSON.parse(response.content).results)\n\n            dataRecherche = response.content;\n        });\n    console.log(dataRecherche);\n    res.writeHead(200);\n    res.end(dataRecherche);\n});\n\n//button\nWebApp.connectHandlers.use('/api/like/', (req, res, next) => {\n    let like = req.url.split(\"/\");\n\n    Messages.insert({like: like[1]});\n\n    HTTP.call('GET', 'https://api.themoviedb.org/3/search/company?api_key=1793c4843a64fbd6fdba88ce08e45c5f&query=' + like[1] + '&page=1', {},\n        function(error, response) {\n            // Handle the error or response here.\n            //ctrl.movies.set(JSON.parse(response.content).results)\n\n            dataRecherche = response.content;\n        });\n    console.log(dataRecherche);\n    res.writeHead(200);\n    res.end(dataRecherche);\n});\n"]},"sourceType":"module","hash":"90a9e773f2ac2f28a894aef494934a2950446731"}
